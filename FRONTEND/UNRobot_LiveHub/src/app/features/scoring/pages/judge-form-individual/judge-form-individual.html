<div class="max-w-3xl mx-auto">
  <app-back-button />

  <div *ngIf="isLoading && !roundSubject.value" class="text-center p-12">
    <p class="font-sans text-lg text-gray-600">Cargando datos de la ronda...</p>
  </div>

  <div *ngIf="errorMessage" class="bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4">
    <p class="font-bold">Error</p>
    <p>{{ errorMessage }}</p>
  </div>

  <div *ngIf="round$ | async as round">
    
    <div class="text-center mb-6">
      <h1 class="font-heading text-4xl font-bold text-unrobot-blue">
        Puntuar: {{ round.categoriaTipo }}
      </h1>
      <p class="font-sans text-2xl text-gray-700">
        Equipo: 
        <span class="font-bold text-brand-dark">{{ round.equipo.nombre }}</span>
      </p>
    </div>

    <form [formGroup]="scoreForm" (ngSubmit)="saveRound()" class="bg-white p-8 rounded-lg shadow-lg border border-gray-200 space-y-6">
      
      <div>
        <label for="puntos" class="block text-sm font-medium text-gray-700">Puntos Obtenidos</label>
        <input 
          id="puntos"
          type="number" 
          formControlName="puntos"
          class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm 
                 text-2xl font-sans font-bold
                 focus:outline-none focus:ring-unrobot-blue focus:border-unrobot-blue">
      </div>
      
      <div>
        <label for="tiempoMs" class="block text-sm font-medium text-gray-700">Tiempo (en Milisegundos)</label>
        <input 
          id="tiempoMs"
          type="number" 
          formControlName="tiempoMs"
          class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm 
                 text-2xl font-sans font-bold
                 focus:outline-none focus:ring-unrobot-blue focus:border-unrobot-blue">
        <p class="text-xs text-gray-500 mt-1">Ej: 1 minuto y 30 seg = 90000 ms.</p>
      </div>

      <div>
        <label for="fallos" class="block text-sm font-medium text-gray-700">NÃºmero de Fallos</label>
        <input 
          id="fallos"
          type="number" 
          formControlName="fallos"
          class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm 
                 text-2xl font-sans font-bold
                 focus:outline-none focus:ring-unrobot-blue focus:border-unrobot-blue">
      </div>

      <button 
        type="submit"
        [disabled]="scoreForm.invalid || scoreForm.disabled || isLoading"
        class="w-full py-4 px-6 rounded-lg font-heading font-semibold text-lg transition-colors
               bg-unrobot-blue text-white
               hover:bg-opacity-90
               focus:outline-none focus:ring-2 focus:ring-unrobot-gold
               disabled:bg-gray-400 disabled:cursor-not-allowed">
        {{ isLoading ? 'Guardando...' : 'Guardar y Finalizar Ronda' }}
      </button>
    </form>
  </div>
</div>